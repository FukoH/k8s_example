apiVersion: v1
data:
    application.yml: "server:\n  port: 19090\nspring:\n  application:\n      name: ftpGateway\n      config:\n        format: json\n  redis:\n    password: iomp_ftp@123\n    sentinel:\n      master: iomp_ftp_m1\n      nodes: sentinel-svc.dcp-sentinel01-s1.svc.appk8s.acp.bs.io:26389\n  cloud: \n    gateway: \n      locator:\n        enabled: true\n      default-filters: \n      - RemoveRequestHeader=Origin\n#      - name: Hystrix\n#        args:\n#          name: failback\n#          fallbackUri: forward:/failback \n      routes:\n      - id: whitelist\n        uri: lb://ftpCloud\n        order: 9\n        predicates:\n         - Path=/webapi/login/skin,/webapi/image/ImageServlet,/webapi/login/verify\n      \n      - id: ftpcloudcroute\n        uri: lb://ftpCloud\n        order: 19\n        predicates:\n         - Path=/webapi/ftp/approvalProcess/**,/webapi/ftp/struCurve/**,/webapi/ftp/fitCurve/**,/webapi/ftp/outCurve/**,/webapi/ftp/outCurve/**,/webapi/ftp/businParam/**,/webapi/ftp/businessVolume/**,/webapi/ftp/predictionPlan/**,/webapi/ftp/predictionExecute/**,/webapi/ftp/messageNotify/**\n\n      - id: ftpapproute\n        uri: lb://ftpApp\n        order: 29\n        predicates:\n        - Path=/webapi/cpm/**,/webapi/ftp/**,/webapi/sys/**,/webapi/dataReferenceCheck/**  \n        \n        \n      - id: defaultroute\n        uri: lb://ftpCloud\n        order: 100\n        predicates:\n        - Path=/**,\n\n      - id: sop_to_json_route\n        uri: http://127.0.0.1:8088\n        order: 11\n        predicates:\n        - Path=/trade/*\n        filters:\n        - PoinSop2Json\n        - PoinJson2Sop\n\n---\nspring: \n  datasource: \n    type: com.zaxxer.hikari.HikariDataSource\n    url: jdbc:mysql://10.233.147.61:16315/poinftp?serverTimezone=Asia/Shanghai&charaterEncoding=UTF-8&useSSL=false\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    username: poinftp\n    password: cEB@1234 \n    hikari: \n      minimum-idle: 15\n      maximum-pool-size: 15\n      idle-timeout: 600000\n      max-lifetime: 1800000\n      connection-timeout: 3000\n      \n  sleuth:\n    redis:\n      enabled: false\n      \n  zipkin:\n    enabled: true\n    base-url: http://ftp-zipkin:19411\n    sender:\n      type: web\n    sampler:\n      probability: 1.0\n    web:\n      skip-pattern: /instances|/webapi/health|/api-docs.*|/autoconfig|/configprops|/dump|/health|/info|/metrics.*|/mappings|/trace|/swagger.*|.*\\\\.png|.*\\\\.css|.*\\\\.js|.*\\\\.html|/favicon.ico|/hystrix.stream|/application/.*|/actuator.*|/cloudfoundryapplication\n  cloud:\n    gateway:\n      httpclient:\n        pool:\n          max-idle-time: 15000\n          \nmybatis.config-location: classpath:mybatis-configuration.xml\nmybatis.mapper-locations: classpath*:META-INF/**/${database_type:mysql}/**/*.mapper.xml\n\nhystrix.command.default.execution.isolation.semaphore.maxConcurrentRequests: 1000\nhystrix.command.default.execution.isolation.thread.timeoutInMilliseconds: 10000\n\nspring.cloud.gateway.dblog.enable: true\nmanagement:\n  endpoints:\n    enabled-by-default: false\n    web.exposure.include: health,threaddump,metrics,httptrace,heapdump\n  endpoint:\n    health.enabled: true\n    threaddump.enabled: true\n    metrics.enabled: true\n    httptrace.enabled: true\n    heapdump.enabled: true\n    \niamSenderIamServer.name: http://ftpCloud\nincludePackages: com.cebbank\nloadPta: true\n\n##logUrl\nlog_url: /iomp/iomp/jarweb/wlslogs\nlog_back_days: 7"
kind: ConfigMap
metadata:
    annotations:
        cpaas.io/description: 网关配置文件
    labels:
        cpaasAutoDeploy: "10"
    name: gateway-application
    namespace: iomp-ftp-s1
